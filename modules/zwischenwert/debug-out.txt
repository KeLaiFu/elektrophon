**************** uncommented deck **************

     1       1  KiCad schematic
     3       2  .param gmin=1e-12
     0       3  .global gnd
    20      25  .subckt lm324 1 2 3 4 5
    24      31  c1 11 12 5.544e-12
    25      32  c2 6 7 20.00e-12
    26      33  dc 5 53 dx
    27      34  de 54 5 dx
    28      35  dlp 90 91 dx
    29      36  dln 92 90 dx
    30      37  dp 4 3 dx
    31      38  egnd 99 0 poly(2) (3,0) (4,0) 0 .5 .5
    32      39  fb 7 99 poly(5) vb vc ve vlp vln 0 15.91e6 -20e6 20e6 20e6 -20e6
    33      40  ga 6 0 11 12 125.7e-6
    34      41  gcm 0 6 10 99 7.067e-9
    35      42  iee 3 10 dc 10.04e-6
    36      43  hlim 90 0 vlim 1k
    37      44  q1 11 2 13 qx
    38      45  q2 12 1 14 qx
    39      46  r2 6 9 100.0e3
    40      47  rc1 4 11 7.957e3
    41      48  rc2 4 12 7.957e3
    42      49  re1 13 10 2.773e3
    43      50  re2 14 10 2.773e3
    44      51  ree 10 99 19.92e6
    45      52  ro1 8 5 50
    46      53  ro2 7 99 50
    47      54  rp 3 4 30.31e3
    48      55  vb 9 0 dc 0
    49      56  vc 3 53 dc 2.100
    50      57  ve 54 4 dc .6
    51      58  vlim 7 8 dc 0
    52      59  vlp 91 0 dc 40
    53      60  vln 0 92 dc 40
    54      61  .model dx d(is=800.0e-18)
    55      62  .model qx pnp(is=800.0e-18 bf=250)
    56      63  .ends
    12      78  .subckt lmx24c 1out 1in- 1in+ vcc- 2in+ 2in- 2out 3out 3in- 3in+ vcc+ 4in+ 4in- 4out params: gmin=1e-12
    35     105  .subckt lm324 1 2 3 4 5
    41     115  c1 11 12 5.544e-12
    42     116  c2 6 7 20.00e-12
    43     117  dc 5 53 dx
    44     118  de 54 5 dx
    45     119  dlp 90 91 dx
    46     120  dln 92 90 dx
    47     121  dp 4 3 dx
    48     122  egnd 99 0 poly(2) (3,0) (4,0) 0 .5 .5
    49     123  fb 7 99 poly(5) vb vc ve vlp vln 0 15.91e6 -20e6 20e6 20e6 -20e6
    50     124  ga 6 0 11 12 125.7e-6
    51     125  gcm 0 6 10 99 7.067e-9
    52     126  iee 3 10 dc 10.04e-6
    53     127  hlim 90 0 vlim 1k
    54     128  q1 11 2 13 qx
    55     129  q2 12 1 14 qx
    56     130  r2 6 9 100.0e3
    57     131  rc1 4 11 7.957e3
    58     132  rc2 4 12 7.957e3
    59     133  re1 13 10 2.773e3
    60     134  re2 14 10 2.773e3
    61     135  ree 10 99 19.92e6
    62     136  ro1 8 5 50
    63     137  ro2 7 99 50
    64     138  rp 3 4 30.31e3
    65     139  vb 9 0 dc 0
    66     140  vc 3 53 dc 2.100
    67     141  ve 54 4 dc .6
    68     142  vlim 7 8 dc 0
    69     143  vlp 91 0 dc 40
    70     144  vln 0 92 dc 40
    71     145  .model dx d(is=800.0e-18)
    72     146  .model qx pnp(is=800.0e-18 bf=250)
    73     147  .ends
    75     149  xu1a 1in+ 1in- vcc+ vcc- 1out lm324
    76     150  xu1b 2in+ 2in- vcc+ vcc- 2out lm324
    77     151  xu1c 3in+ 3in- vcc+ vcc- 3out lm324
    78     152  xu1d 4in+ 4in- vcc+ vcc- 4out lm324
    79     153  .ends
    37     193  .subckt bc857cw 1 2 3 4
    40     198  q1 1 2 3 main
    41     199  q2 2 2 4 main
    42     200  .model main pnp is=2.616e-014 nf=0.9973 ise=4.892e-015 ne=1.411 bf=435 ikf=0.048 vaf=12.54 nr=0.9931 isc=9.492e-015 nc=1.262 br=13 ikr=0.02063 var=15.21 rb=39 irb=9.5e-005 rbm=2.95 re=0.5029 rc=0.287 xtb=0 eg=1.11 xti=3 cje=8.778e-012 vje=0.7445 mje=0.3727 tf=1.01e-009 xtf=18 vtf=5 itf=0.8 ptf=0 cjc=5.461e-012 vjc=0.972 mjc=0.522 xcjc=1 tr=4.695e-008 cjs=0 vjs=0.75 mjs=0.333 fc=0.79
    43     201  .ends
    39     244  .subckt lm13700/ns 1 2 3 4 5 6 7 8 11
    59     266  c1 6 4 4.8p
    60     267  c2 3 6 4.8p
    62     269  c3 5 6 6.26p
    63     270  d1 2 4 dx
    64     271  d2 2 3 dx
    65     272  d3 11 21 dx
    66     273  d4 21 22 dx
    67     274  d5 1 26 dx
    68     275  d6 26 27 dx
    69     276  d7 5 29 dx
    70     277  d8 28 5 dx
    71     278  d10 31 25 dx
    73     280  d11 28 25 dx
    75     282  f1 4 3 poly(1) v6 1e-10 5.129e-2 -1.189e4 1.123e9
    76     283  f2 11 5 v2 1.022
    77     284  f3 25 6 v3 1.0
    78     285  f4 5 6 v1 1.022
    80     287  f5 5 0 poly(2) v3 v7 0 0 0 0 1
    81     288  g1 0 33 5 0 .55e-3
    82     289  i1 11 6 300u
    83     290  q1 24 32 31 qx1
    84     291  q2 23 3 31 qx2
    85     292  q3 11 7 30 qz
    86     293  q4 11 30 8 qy
    87     294  v1 22 24 0v
    88     295  v2 22 23 0v
    89     296  v3 27 6 0v
    90     297  v4 11 29 1.4
    91     298  v5 28 6 1.2
    92     299  v6 4 32 0v
    93     300  v7 33 0 0v
    94     301  .model qx1 npn (is=5e-16 bf=200 ne=1.15 ise=.63e-16 ikf=1e-2)
    95     302  .model qx2 npn (is=5.125e-16 bf=200 ne=1.15 ise=.63e-16 ikf=1e-2)
    96     303  .model qy npn (is=6e-15 bf=50)
    97     304  .model qz npn (is=5e-16 bf=266)
    98     305  .model dx d (is=5e-16)
    99     306  .ends
    12     322  .subckt lm13700d 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 params: gmin=1e-12
    54     368  .subckt lm13700/ns 1 2 3 4 5 6 7 8 11
    76     394  c1 6 4 4.8p
    77     395  c2 3 6 4.8p
    79     397  c3 5 6 6.26p
    80     398  d1 2 4 dx
    81     399  d2 2 3 dx
    82     400  d3 11 21 dx
    83     401  d4 21 22 dx
    84     402  d5 1 26 dx
    85     403  d6 26 27 dx
    86     404  d7 5 29 dx
    87     405  d8 28 5 dx
    88     406  d10 31 25 dx
    90     408  d11 28 25 dx
    92     410  f1 4 3 poly(1) v6 1e-10 5.129e-2 -1.189e4 1.123e9
    93     411  f2 11 5 v2 1.022
    94     412  f3 25 6 v3 1.0
    95     413  f4 5 6 v1 1.022
    97     415  f5 5 0 poly(2) v3 v7 0 0 0 0 1
    98     416  g1 0 33 5 0 .55e-3
    99     417  i1 11 6 300u
   100     418  q1 24 32 31 qx1
   101     419  q2 23 3 31 qx2
   102     420  q3 11 7 30 qz
   103     421  q4 11 30 8 qy
   104     422  v1 22 24 0v
   105     423  v2 22 23 0v
   106     424  v3 27 6 0v
   107     425  v4 11 29 1.4
   108     426  v5 28 6 1.2
   109     427  v6 4 32 0v
   110     428  v7 33 0 0v
   111     429  .model qx1 npn (is=5e-16 bf=200 ne=1.15 ise=.63e-16 ikf=1e-2)
   112     430  .model qx2 npn (is=5.125e-16 bf=200 ne=1.15 ise=.63e-16 ikf=1e-2)
   113     431  .model qy npn (is=6e-15 bf=50)
   114     432  .model qz npn (is=5e-16 bf=266)
   115     433  .model dx d (is=5e-16)
   116     434  .ends
   119     437  xu1a 1 2 3 4 5 6 7 8 11 lm13700/ns
   120     438  xu1b 16 15 14 13 12 6 10 9 11 lm13700/ns
   121     439  .ends
     7     441  r1 +15v net-_r1-pad2_ 150k
     8     442  r2 net-_r1-pad2_ net-_r2-pad2_ 47k
     9     443  xu1 net-_r12-pad1_ net-_r12-pad2_ net-_r1-pad2_ +15v net-_r13-pad2_ net-_r2-pad2_ net-_q1-pad3_ net-_q2-pad3_ net-_r3-pad2_ net-_r14-pad2_ -15v net-_r10-pad1_ net-_r4-pad2_ net-_q3-pad3_ lmx24c 1e-12
    10     444  r12 net-_r12-pad1_ net-_r12-pad2_ 100k
    11     445  r7 net-_r12-pad2_ cv 10k
    12     446  r13 net-_q1-pad3_ net-_r13-pad2_ 100k
    13     447  r8 net-_r13-pad2_ cv 10k
    14     448  r14 net-_q2-pad3_ net-_r14-pad2_ 100k
    15     449  r9 net-_r14-pad2_ cv 10k
    16     450  r15 net-_q3-pad3_ net-_r10-pad1_ 100k
    17     451  r10 net-_r10-pad1_ cv 10k
    18     452  r3 net-_r2-pad2_ net-_r3-pad2_ 47k
    19     453  r4 net-_r3-pad2_ net-_r4-pad2_ 47k
    20     454  xu2 net-_q4-pad3_ net-_r11-pad1_ net-_r5-pad2_ +15v 0 net-_r25-pad1_ out nc_01 nc_02 nc_03 -15v nc_04 nc_05 nc_06 lmx24c 1e-12
    21     455  r16 net-_q4-pad3_ net-_r11-pad1_ 100k
    22     456  r11 net-_r11-pad1_ cv 10k
    23     457  r5 net-_r4-pad2_ net-_r5-pad2_ 47k
    24     458  r6 net-_r5-pad2_ -15v 150k
    25     459  xq1 net-_q1-pad1_ net-_q1-pad2_ net-_q1-pad3_ net-_q1-pad3_ bc857cw
    26     460  r17 net-_r12-pad1_ net-_q1-pad1_ 47k
    27     461  xq2 net-_q2-pad1_ net-_q2-pad2_ net-_q2-pad3_ nc_07 bc857cw
    28     462  r18 net-_q1-pad3_ net-_q2-pad1_ 47k
    29     463  xq3 net-_q3-pad1_ net-_q3-pad2_ net-_q3-pad3_ net-_q3-pad3_ bc857cw
    30     464  r19 nc_08 net-_q3-pad1_ 47k
    31     465  r20 net-_q3-pad3_ net-_q4-pad1_ 47k
    32     466  xq4 net-_q4-pad1_ net-_q4-pad2_ net-_q4-pad3_ net-_q4-pad3_ bc857cw
    33     467  xu5 net-_r22-pad1_ nc_09 input_b 0 net-_r26-pad2_ -15v nc_10 nc_11 nc_12 nc_13 +15v net-_r25-pad2_ 0 input_a nc_14 net-_r21-pad1_ lm13700d 1e-12
    34     468  r21 net-_r21-pad1_ net-_q1-pad2_ 39k
    35     469  r22 net-_r22-pad1_ net-_q2-pad2_ 39k
    36     470  xu6 net-_r24-pad1_ nc_15 input_d 0 net-_r28-pad2_ -15v nc_16 nc_17 nc_18 nc_19 +15v net-_r27-pad2_ 0 input_c nc_20 net-_r23-pad1_ lm13700d 1e-12
    37     471  r23 net-_r23-pad1_ net-_q3-pad2_ 39k
    38     472  r24 net-_r24-pad1_ net-_q4-pad2_ 39k
    39     473  r25 net-_r25-pad1_ net-_r25-pad2_ 100k
    40     474  r26 net-_r25-pad1_ net-_r26-pad2_ 100k
    41     475  r27 net-_r25-pad1_ net-_r27-pad2_ 100k
    42     476  r28 net-_r25-pad1_ net-_r28-pad2_ 100k
    43     477  r29 out net-_r25-pad1_ 100k
    44     478  v1 +15v 0 dc 15
    45     479  v2 -15v 0 dc -15
    46     480  v3 input_a 0 dc 0v ac 0v sin(0 10m 200)
    47     481  v4 input_b 0 dc 0v ac 0v sin(0 10m 200)
    48     482  v5 input_c 0 dc 0v ac 0v sin(0 10m 200)
    49     483  v6 input_d 0 dc 0v ac 0v sin(0 10m 200)
    50     484  v7 cv 0 dc 0v ac 0v pulse(-5 5 0 100m 0 0 100m)
    51     485  .options temp=25c
    52     486  .options tnom=25c
    53     487  .ic
    54     488  .tran 1us 20ms 0s
    56     490  .end

****************** complete deck ***************

     1       1  KiCad schematic
     3       2  .param gmin=1e-12
     0       3  .global gnd
     2       4  *include /home/etienne/Documents/elektrophon/lib/spice/opamp/LMx24_LM2902.lib
     1       5  *param temp={temper}
     3       6  *func temp() {temper}
     2       7  *param vt={(temper+273.15)*8.6173303e-5}
     4       8  *func vt() {(temper+273.15)*8.6173303e-5}
     4       9  *func limit(x, a, b) { min(max(x,a),b)}
     5      10  *func pwr(x, a) { abs(x)**a }
     6      11  *func pwrs(x, a) { sgn(x)*pwr(x,a)}
     7      12  *func stp(x) { u(x)}
     8      13  *func if(a, b, c) {ternary_fcn(a,b,c)}
     9      14  *func int(x) { sign(x)*floor(abs(x))}
    10      15  * fetched on 2015/3/15 from http://www.ti.com/lit/zip/sloj043
    11      16  * lm324 operational amplifier "macromodel" subcircuit
    12      17  * created using parts release 4.01 on 09/08/89 at 10:54
    13      18  * (rev n/a)      supply voltage: 5v
    14      19  * connections:   non-inverting input
    15      20  *                | inverting input
    16      21  *                | | positive power supply
    17      22  *                | | | negative power supply
    18      23  *                | | | | output
    19      24  *                | | | | |
    20      25  .subckt lm324 1 2 3 4 5
    21      26  *param temp={temper}
    23      27  *func temp() {temper}
    22      28  *param vt={(temper+273.15)*8.6173303e-5}
    24      29  *func vt() {(temper+273.15)*8.6173303e-5}
    23      30  *
    24      31  c1 11 12 5.544e-12
    25      32  c2 6 7 20.00e-12
    26      33  dc 5 53 dx
    27      34  de 54 5 dx
    28      35  dlp 90 91 dx
    29      36  dln 92 90 dx
    30      37  dp 4 3 dx
    31      38  egnd 99 0 poly(2) (3,0) (4,0) 0 .5 .5
    32      39  fb 7 99 poly(5) vb vc ve vlp vln 0 15.91e6 -20e6 20e6 20e6 -20e6
    33      40  ga 6 0 11 12 125.7e-6
    34      41  gcm 0 6 10 99 7.067e-9
    35      42  iee 3 10 dc 10.04e-6
    36      43  hlim 90 0 vlim 1k
    37      44  q1 11 2 13 qx
    38      45  q2 12 1 14 qx
    39      46  r2 6 9 100.0e3
    40      47  rc1 4 11 7.957e3
    41      48  rc2 4 12 7.957e3
    42      49  re1 13 10 2.773e3
    43      50  re2 14 10 2.773e3
    44      51  ree 10 99 19.92e6
    45      52  ro1 8 5 50
    46      53  ro2 7 99 50
    47      54  rp 3 4 30.31e3
    48      55  vb 9 0 dc 0
    49      56  vc 3 53 dc 2.100
    50      57  ve 54 4 dc .6
    51      58  vlim 7 8 dc 0
    52      59  vlp 91 0 dc 40
    53      60  vln 0 92 dc 40
    54      61  .model dx d(is=800.0e-18)
    55      62  .model qx pnp(is=800.0e-18 bf=250)
    56      63  .ends
     2      64  *end of: /home/etienne/documents/elektrophon/lib/spice/opamp/lmx24_lm2902.lib
    60      65  *include /home/etienne/Documents/elektrophon/lib/spice/opamp/LMx24.lib
     1      66  *param temp={temper}
    61      67  *func temp() {temper}
     2      68  *param vt={(temper+273.15)*8.6173303e-5}
    62      69  *func vt() {(temper+273.15)*8.6173303e-5}
     4      70  *func limit(x, a, b) { min(max(x,a),b)}
     5      71  *func pwr(x, a) { abs(x)**a }
     6      72  *func pwrs(x, a) { sgn(x)*pwr(x,a)}
     7      73  *func stp(x) { u(x)}
     8      74  *func if(a, b, c) {ternary_fcn(a,b,c)}
     9      75  *func int(x) { sign(x)*floor(abs(x))}
    10      76  * a dual opamp ngspice model
    11      77  * file name: lmx24.lib
    12      78  .subckt lmx24c 1out 1in- 1in+ vcc- 2in+ 2in- 2out 3out 3in- 3in+ vcc+ 4in+ 4in- 4out params: gmin=1e-12
    18      79  *param gmin=1e-12
    13      80  *param temp={temper}
    73      81  *func temp() {temper}
    14      82  *param vt={(temper+273.15)*8.6173303e-5}
    74      83  *func vt() {(temper+273.15)*8.6173303e-5}
    15      84  *include LMx24_LM2902.lib
    16      85  *param temp={temper}
    76      86  *func temp() {temper}
    17      87  *param vt={(temper+273.15)*8.6173303e-5}
    77      88  *func vt() {(temper+273.15)*8.6173303e-5}
    19      89  *func limit(x, a, b) { min(max(x,a),b)}
    20      90  *func pwr(x, a) { abs(x)**a }
    21      91  *func pwrs(x, a) { sgn(x)*pwr(x,a)}
    22      92  *func stp(x) { u(x)}
    23      93  *func if(a, b, c) {ternary_fcn(a,b,c)}
    24      94  *func int(x) { sign(x)*floor(abs(x))}
    25      95  * fetched on 2015/3/15 from http://www.ti.com/lit/zip/sloj043
    26      96  * lm324 operational amplifier "macromodel" subcircuit
    27      97  * created using parts release 4.01 on 09/08/89 at 10:54
    28      98  * (rev n/a)      supply voltage: 5v
    29      99  * connections:   non-inverting input
    30     100  *                | inverting input
    31     101  *                | | positive power supply
    32     102  *                | | | negative power supply
    33     103  *                | | | | output
    34     104  *                | | | | |
    35     105  .subckt lm324 1 2 3 4 5
    36     106  *param temp={temper}
    96     107  *func temp() {temper}
    37     108  *param vt={(temper+273.15)*8.6173303e-5}
    97     109  *func vt() {(temper+273.15)*8.6173303e-5}
    38     110  *param temp={temper}
    98     111  *func temp() {temper}
    39     112  *param vt={(temper+273.15)*8.6173303e-5}
    99     113  *func vt() {(temper+273.15)*8.6173303e-5}
    40     114  *
    41     115  c1 11 12 5.544e-12
    42     116  c2 6 7 20.00e-12
    43     117  dc 5 53 dx
    44     118  de 54 5 dx
    45     119  dlp 90 91 dx
    46     120  dln 92 90 dx
    47     121  dp 4 3 dx
    48     122  egnd 99 0 poly(2) (3,0) (4,0) 0 .5 .5
    49     123  fb 7 99 poly(5) vb vc ve vlp vln 0 15.91e6 -20e6 20e6 20e6 -20e6
    50     124  ga 6 0 11 12 125.7e-6
    51     125  gcm 0 6 10 99 7.067e-9
    52     126  iee 3 10 dc 10.04e-6
    53     127  hlim 90 0 vlim 1k
    54     128  q1 11 2 13 qx
    55     129  q2 12 1 14 qx
    56     130  r2 6 9 100.0e3
    57     131  rc1 4 11 7.957e3
    58     132  rc2 4 12 7.957e3
    59     133  re1 13 10 2.773e3
    60     134  re2 14 10 2.773e3
    61     135  ree 10 99 19.92e6
    62     136  ro1 8 5 50
    63     137  ro2 7 99 50
    64     138  rp 3 4 30.31e3
    65     139  vb 9 0 dc 0
    66     140  vc 3 53 dc 2.100
    67     141  ve 54 4 dc .6
    68     142  vlim 7 8 dc 0
    69     143  vlp 91 0 dc 40
    70     144  vln 0 92 dc 40
    71     145  .model dx d(is=800.0e-18)
    72     146  .model qx pnp(is=800.0e-18 bf=250)
    73     147  .ends
    74     148  *end of: lmx24_lm2902.lib
    75     149  xu1a 1in+ 1in- vcc+ vcc- 1out lm324
    76     150  xu1b 2in+ 2in- vcc+ vcc- 2out lm324
    77     151  xu1c 3in+ 3in- vcc+ vcc- 3out lm324
    78     152  xu1d 4in+ 4in- vcc+ vcc- 4out lm324
    79     153  .ends
     3     154  *end of: /home/etienne/documents/elektrophon/lib/spice/opamp/lmx24.lib
   141     155  *include /home/etienne/Documents/elektrophon/lib/spice/transistor/BCV62C.lib
     1     156  *param temp={temper}
   142     157  *func temp() {temper}
     2     158  *param vt={(temper+273.15)*8.6173303e-5}
   143     159  *func vt() {(temper+273.15)*8.6173303e-5}
     4     160  *func limit(x, a, b) { min(max(x,a),b)}
     5     161  *func pwr(x, a) { abs(x)**a }
     6     162  *func pwrs(x, a) { sgn(x)*pwr(x,a)}
     7     163  *func stp(x) { u(x)}
     8     164  *func if(a, b, c) {ternary_fcn(a,b,c)}
     9     165  *func int(x) { sign(x)*floor(abs(x))}
    10     166  ***********************************************************
    11     167  *
    12     168  * bcv62c
    13     169  *
    14     170  * nexperia
    15     171  *
    16     172  * general purpose double pnp transistor
    17     173  * ic   = 100 ma
    18     174  * vceo = 30 v 
    19     175  * hfe  = 420 - 800 @ 5v/2ma
    20     176  *
    21     177  *
    22     178  *
    23     179  *
    24     180  * package pinning does not match spice model pinning.
    25     181  * package: sot 143b
    26     182  * 
    27     183  * package pin 1: collector tr2; base tr1 and tr2
    28     184  * package pin 2: collector tr1
    29     185  * package pin 3: emitter   tr1
    30     186  * package pin 4: emitter   tr2
    31     187  *
    32     188  * extraction date (week/year): 45/2013
    33     189  * spicemodel does not include temperature dependency
    34     190  *
    35     191  **********************************************************
    36     192  * #
    37     193  .subckt bc857cw 1 2 3 4
    38     194  *param temp={temper}
   179     195  *func temp() {temper}
    39     196  *param vt={(temper+273.15)*8.6173303e-5}
   180     197  *func vt() {(temper+273.15)*8.6173303e-5}
    40     198  q1 1 2 3 main
    41     199  q2 2 2 4 main
    42     200  .model main pnp is=2.616e-014 nf=0.9973 ise=4.892e-015 ne=1.411 bf=435 ikf=0.048 vaf=12.54 nr=0.9931 isc=9.492e-015 nc=1.262 br=13 ikr=0.02063 var=15.21 rb=39 irb=9.5e-005 rbm=2.95 re=0.5029 rc=0.287 xtb=0 eg=1.11 xti=3 cje=8.778e-012 vje=0.7445 mje=0.3727 tf=1.01e-009 xtf=18 vtf=5 itf=0.8 ptf=0 cjc=5.461e-012 vjc=0.972 mjc=0.522 xcjc=1 tr=4.695e-008 cjs=0 vjs=0.75 mjs=0.333 fc=0.79
    43     201  .ends
    44     202  *
     4     203  *end of: /home/etienne/documents/elektrophon/lib/spice/transistor/bcv62c.lib
   187     204  *include /home/etienne/Documents/elektrophon/lib/spice/opamp/LM13700.MOD
     1     205  *param temp={temper}
   188     206  *func temp() {temper}
     2     207  *param vt={(temper+273.15)*8.6173303e-5}
   189     208  *func vt() {(temper+273.15)*8.6173303e-5}
     4     209  *func limit(x, a, b) { min(max(x,a),b)}
     5     210  *func pwr(x, a) { abs(x)**a }
     6     211  *func pwrs(x, a) { sgn(x)*pwr(x,a)}
     7     212  *func stp(x) { u(x)}
     8     213  *func if(a, b, c) {ternary_fcn(a,b,c)}
     9     214  *func int(x) { sign(x)*floor(abs(x))}
    10     215  *//////////////////////////////////////////////////////////////////////
    11     216  * (c) national semiconductor, inc.
    12     217  * models developed and under copyright by:
    13     218  * national semiconductor, inc.  
    14     219  */////////////////////////////////////////////////////////////////////
    15     220  * legal notice: this material is intended for free software support.
    16     221  * the file may be copied, and distributed; however, reselling the 
    17     222  *  material is illegal
    18     223  *////////////////////////////////////////////////////////////////////
    19     224  * for ordering or technical information on these models, contact:
    20     225  * national semiconductor's customer response center
    21     226  *                 7:00 a.m.--7:00 p.m.  u.s. central time
    22     227  *                                (800) 272-9959
    23     228  * for applications support, contact the internet address:
    24     229  *  amps-apps@galaxy.nsc.com
    25     230  * \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\            
    26     231  * lm13700 dual operational transconductance amplifier                 
    27     232  * \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\                 
    28     233  *
    29     234  *                   amplifier bias input
    30     235  *                   | diode bias
    31     236  *                   | | positive input
    32     237  *                   | | | negative input
    33     238  *                   | | | | output
    34     239  *                   | | | | | negative power supply
    35     240  *                   | | | | | | buffer input
    36     241  *                   | | | | | | | buffer output
    37     242  *                   | | | | | | | | positive power supply
    38     243  *                   | | | | | | | | |
    39     244  .subckt lm13700/ns 1 2 3 4 5 6 7 8 11
    40     245  *param temp={temper}
   227     246  *func temp() {temper}
    41     247  *param vt={(temper+273.15)*8.6173303e-5}
   228     248  *func vt() {(temper+273.15)*8.6173303e-5}
    42     249  *
    43     250  * features:
    44     251  * gm adjustable over 6 decades.
    45     252  * excellent gm linearity.
    46     253  * linearizing diodes.
    47     254  * wide supply range of +/-2v to +/-22v.
    48     255  *
    49     256  * note:  this model is single-pole in nature and over-estimates
    50     257  *       ac bandwidth and phase margin (stability) by over 2x.   
    51     258  *       although refinement may be possible in the future, please
    52     259  *       use benchtesting to finalize ac circuit design.
    53     260  * 
    54     261  * note: model is for single device only and simulated
    55     262  *       supply current is 1/2 of total device current.
    56     263  *
    57     264  ******************************************************
    58     265  * 
    59     266  c1 6 4 4.8p
    60     267  c2 3 6 4.8p
    61     268  * output capacitor  
    62     269  c3 5 6 6.26p
    63     270  d1 2 4 dx
    64     271  d2 2 3 dx
    65     272  d3 11 21 dx
    66     273  d4 21 22 dx
    67     274  d5 1 26 dx
    68     275  d6 26 27 dx
    69     276  d7 5 29 dx
    70     277  d8 28 5 dx
    71     278  d10 31 25 dx
    72     279  * clamp for -cmr  
    73     280  d11 28 25 dx
    74     281  * ios source 
    75     282  f1 4 3 poly(1) v6 1e-10 5.129e-2 -1.189e4 1.123e9
    76     283  f2 11 5 v2 1.022
    77     284  f3 25 6 v3 1.0
    78     285  f4 5 6 v1 1.022
    79     286  * output impedance 
    80     287  f5 5 0 poly(2) v3 v7 0 0 0 0 1
    81     288  g1 0 33 5 0 .55e-3
    82     289  i1 11 6 300u
    83     290  q1 24 32 31 qx1
    84     291  q2 23 3 31 qx2
    85     292  q3 11 7 30 qz
    86     293  q4 11 30 8 qy
    87     294  v1 22 24 0v
    88     295  v2 22 23 0v
    89     296  v3 27 6 0v
    90     297  v4 11 29 1.4
    91     298  v5 28 6 1.2
    92     299  v6 4 32 0v
    93     300  v7 33 0 0v
    94     301  .model qx1 npn (is=5e-16 bf=200 ne=1.15 ise=.63e-16 ikf=1e-2)
    95     302  .model qx2 npn (is=5.125e-16 bf=200 ne=1.15 ise=.63e-16 ikf=1e-2)
    96     303  .model qy npn (is=6e-15 bf=50)
    97     304  .model qz npn (is=5e-16 bf=266)
    98     305  .model dx d (is=5e-16)
    99     306  .ends
   100     307  *$
     5     308  *end of: /home/etienne/documents/elektrophon/lib/spice/opamp/lm13700.mod
   289     309  *include /home/etienne/Documents/elektrophon/lib/spice/opamp/LM13700d.MOD
     1     310  *param temp={temper}
   290     311  *func temp() {temper}
     2     312  *param vt={(temper+273.15)*8.6173303e-5}
   291     313  *func vt() {(temper+273.15)*8.6173303e-5}
     4     314  *func limit(x, a, b) { min(max(x,a),b)}
     5     315  *func pwr(x, a) { abs(x)**a }
     6     316  *func pwrs(x, a) { sgn(x)*pwr(x,a)}
     7     317  *func stp(x) { u(x)}
     8     318  *func if(a, b, c) {ternary_fcn(a,b,c)}
     9     319  *func int(x) { sign(x)*floor(abs(x))}
    10     320  * a dual ota ngspice model
    11     321  * file name: lm13700d.mod
    12     322  .subckt lm13700d 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 params: gmin=1e-12
    18     323  *param gmin=1e-12
    13     324  *param temp={temper}
   302     325  *func temp() {temper}
    14     326  *param vt={(temper+273.15)*8.6173303e-5}
   303     327  *func vt() {(temper+273.15)*8.6173303e-5}
    15     328  *include LM13700.MOD
    16     329  *param temp={temper}
   305     330  *func temp() {temper}
    17     331  *param vt={(temper+273.15)*8.6173303e-5}
   306     332  *func vt() {(temper+273.15)*8.6173303e-5}
    19     333  *func limit(x, a, b) { min(max(x,a),b)}
    20     334  *func pwr(x, a) { abs(x)**a }
    21     335  *func pwrs(x, a) { sgn(x)*pwr(x,a)}
    22     336  *func stp(x) { u(x)}
    23     337  *func if(a, b, c) {ternary_fcn(a,b,c)}
    24     338  *func int(x) { sign(x)*floor(abs(x))}
    25     339  *//////////////////////////////////////////////////////////////////////
    26     340  * (c) national semiconductor, inc.
    27     341  * models developed and under copyright by:
    28     342  * national semiconductor, inc.  
    29     343  */////////////////////////////////////////////////////////////////////
    30     344  * legal notice: this material is intended for free software support.
    31     345  * the file may be copied, and distributed; however, reselling the 
    32     346  *  material is illegal
    33     347  *////////////////////////////////////////////////////////////////////
    34     348  * for ordering or technical information on these models, contact:
    35     349  * national semiconductor's customer response center
    36     350  *                 7:00 a.m.--7:00 p.m.  u.s. central time
    37     351  *                                (800) 272-9959
    38     352  * for applications support, contact the internet address:
    39     353  *  amps-apps@galaxy.nsc.com
    40     354  * \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\            
    41     355  * lm13700 dual operational transconductance amplifier                 
    42     356  * \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\                 
    43     357  *
    44     358  *                   amplifier bias input
    45     359  *                   | diode bias
    46     360  *                   | | positive input
    47     361  *                   | | | negative input
    48     362  *                   | | | | output
    49     363  *                   | | | | | negative power supply
    50     364  *                   | | | | | | buffer input
    51     365  *                   | | | | | | | buffer output
    52     366  *                   | | | | | | | | positive power supply
    53     367  *                   | | | | | | | | |
    54     368  .subckt lm13700/ns 1 2 3 4 5 6 7 8 11
    55     369  *param temp={temper}
   344     370  *func temp() {temper}
    56     371  *param vt={(temper+273.15)*8.6173303e-5}
   345     372  *func vt() {(temper+273.15)*8.6173303e-5}
    57     373  *param temp={temper}
   346     374  *func temp() {temper}
    58     375  *param vt={(temper+273.15)*8.6173303e-5}
   347     376  *func vt() {(temper+273.15)*8.6173303e-5}
    59     377  *
    60     378  * features:
    61     379  * gm adjustable over 6 decades.
    62     380  * excellent gm linearity.
    63     381  * linearizing diodes.
    64     382  * wide supply range of +/-2v to +/-22v.
    65     383  *
    66     384  * note:  this model is single-pole in nature and over-estimates
    67     385  *       ac bandwidth and phase margin (stability) by over 2x.   
    68     386  *       although refinement may be possible in the future, please
    69     387  *       use benchtesting to finalize ac circuit design.
    70     388  * 
    71     389  * note: model is for single device only and simulated
    72     390  *       supply current is 1/2 of total device current.
    73     391  *
    74     392  ******************************************************
    75     393  * 
    76     394  c1 6 4 4.8p
    77     395  c2 3 6 4.8p
    78     396  * output capacitor  
    79     397  c3 5 6 6.26p
    80     398  d1 2 4 dx
    81     399  d2 2 3 dx
    82     400  d3 11 21 dx
    83     401  d4 21 22 dx
    84     402  d5 1 26 dx
    85     403  d6 26 27 dx
    86     404  d7 5 29 dx
    87     405  d8 28 5 dx
    88     406  d10 31 25 dx
    89     407  * clamp for -cmr  
    90     408  d11 28 25 dx
    91     409  * ios source 
    92     410  f1 4 3 poly(1) v6 1e-10 5.129e-2 -1.189e4 1.123e9
    93     411  f2 11 5 v2 1.022
    94     412  f3 25 6 v3 1.0
    95     413  f4 5 6 v1 1.022
    96     414  * output impedance 
    97     415  f5 5 0 poly(2) v3 v7 0 0 0 0 1
    98     416  g1 0 33 5 0 .55e-3
    99     417  i1 11 6 300u
   100     418  q1 24 32 31 qx1
   101     419  q2 23 3 31 qx2
   102     420  q3 11 7 30 qz
   103     421  q4 11 30 8 qy
   104     422  v1 22 24 0v
   105     423  v2 22 23 0v
   106     424  v3 27 6 0v
   107     425  v4 11 29 1.4
   108     426  v5 28 6 1.2
   109     427  v6 4 32 0v
   110     428  v7 33 0 0v
   111     429  .model qx1 npn (is=5e-16 bf=200 ne=1.15 ise=.63e-16 ikf=1e-2)
   112     430  .model qx2 npn (is=5.125e-16 bf=200 ne=1.15 ise=.63e-16 ikf=1e-2)
   113     431  .model qy npn (is=6e-15 bf=50)
   114     432  .model qz npn (is=5e-16 bf=266)
   115     433  .model dx d (is=5e-16)
   116     434  .ends
   117     435  *$
   118     436  *end of: lm13700.mod
   119     437  xu1a 1 2 3 4 5 6 7 8 11 lm13700/ns
   120     438  xu1b 16 15 14 13 12 6 10 9 11 lm13700/ns
   121     439  .ends
     6     440  *end of: /home/etienne/documents/elektrophon/lib/spice/opamp/lm13700d.mod
     7     441  r1 +15v net-_r1-pad2_ 150k
     8     442  r2 net-_r1-pad2_ net-_r2-pad2_ 47k
     9     443  xu1 net-_r12-pad1_ net-_r12-pad2_ net-_r1-pad2_ +15v net-_r13-pad2_ net-_r2-pad2_ net-_q1-pad3_ net-_q2-pad3_ net-_r3-pad2_ net-_r14-pad2_ -15v net-_r10-pad1_ net-_r4-pad2_ net-_q3-pad3_ lmx24c 1e-12
    10     444  r12 net-_r12-pad1_ net-_r12-pad2_ 100k
    11     445  r7 net-_r12-pad2_ cv 10k
    12     446  r13 net-_q1-pad3_ net-_r13-pad2_ 100k
    13     447  r8 net-_r13-pad2_ cv 10k
    14     448  r14 net-_q2-pad3_ net-_r14-pad2_ 100k
    15     449  r9 net-_r14-pad2_ cv 10k
    16     450  r15 net-_q3-pad3_ net-_r10-pad1_ 100k
    17     451  r10 net-_r10-pad1_ cv 10k
    18     452  r3 net-_r2-pad2_ net-_r3-pad2_ 47k
    19     453  r4 net-_r3-pad2_ net-_r4-pad2_ 47k
    20     454  xu2 net-_q4-pad3_ net-_r11-pad1_ net-_r5-pad2_ +15v 0 net-_r25-pad1_ out nc_01 nc_02 nc_03 -15v nc_04 nc_05 nc_06 lmx24c 1e-12
    21     455  r16 net-_q4-pad3_ net-_r11-pad1_ 100k
    22     456  r11 net-_r11-pad1_ cv 10k
    23     457  r5 net-_r4-pad2_ net-_r5-pad2_ 47k
    24     458  r6 net-_r5-pad2_ -15v 150k
    25     459  xq1 net-_q1-pad1_ net-_q1-pad2_ net-_q1-pad3_ net-_q1-pad3_ bc857cw
    26     460  r17 net-_r12-pad1_ net-_q1-pad1_ 47k
    27     461  xq2 net-_q2-pad1_ net-_q2-pad2_ net-_q2-pad3_ nc_07 bc857cw
    28     462  r18 net-_q1-pad3_ net-_q2-pad1_ 47k
    29     463  xq3 net-_q3-pad1_ net-_q3-pad2_ net-_q3-pad3_ net-_q3-pad3_ bc857cw
    30     464  r19 nc_08 net-_q3-pad1_ 47k
    31     465  r20 net-_q3-pad3_ net-_q4-pad1_ 47k
    32     466  xq4 net-_q4-pad1_ net-_q4-pad2_ net-_q4-pad3_ net-_q4-pad3_ bc857cw
    33     467  xu5 net-_r22-pad1_ nc_09 input_b 0 net-_r26-pad2_ -15v nc_10 nc_11 nc_12 nc_13 +15v net-_r25-pad2_ 0 input_a nc_14 net-_r21-pad1_ lm13700d 1e-12
    34     468  r21 net-_r21-pad1_ net-_q1-pad2_ 39k
    35     469  r22 net-_r22-pad1_ net-_q2-pad2_ 39k
    36     470  xu6 net-_r24-pad1_ nc_15 input_d 0 net-_r28-pad2_ -15v nc_16 nc_17 nc_18 nc_19 +15v net-_r27-pad2_ 0 input_c nc_20 net-_r23-pad1_ lm13700d 1e-12
    37     471  r23 net-_r23-pad1_ net-_q3-pad2_ 39k
    38     472  r24 net-_r24-pad1_ net-_q4-pad2_ 39k
    39     473  r25 net-_r25-pad1_ net-_r25-pad2_ 100k
    40     474  r26 net-_r25-pad1_ net-_r26-pad2_ 100k
    41     475  r27 net-_r25-pad1_ net-_r27-pad2_ 100k
    42     476  r28 net-_r25-pad1_ net-_r28-pad2_ 100k
    43     477  r29 out net-_r25-pad1_ 100k
    44     478  v1 +15v 0 dc 15
    45     479  v2 -15v 0 dc -15
    46     480  v3 input_a 0 dc 0v ac 0v sin(0 10m 200)
    47     481  v4 input_b 0 dc 0v ac 0v sin(0 10m 200)
    48     482  v5 input_c 0 dc 0v ac 0v sin(0 10m 200)
    49     483  v6 input_d 0 dc 0v ac 0v sin(0 10m 200)
    50     484  v7 cv 0 dc 0v ac 0v pulse(-5 5 0 100m 0 0 100m)
    51     485  .options temp=25c
    52     486  .options tnom=25c
    53     487  .ic
    54     488  .tran 1us 20ms 0s
    55     489  *end
    56     490  .end
